<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<title>Calculadora de IG</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<style>
    body { font-family: sans-serif; max-width: 600px; margin: 2rem auto; padding: 1rem; }
    h2 { margin-top: 2rem; }
    label { display: block; margin-top: 1rem; }
    input, select {
      padding: 0.5rem;
      margin-top: 0.25rem;
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 6px;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
    }
    button {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      background-color: #007BFF;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .resultado { margin-top: 1rem; font-weight: bold; }
    table, th, td {
      border: 1px solid #ccc;
    }
    th, td {
      padding: 0.5rem;
      text-align: center;
    }
  </style>
</head>
<body>
<h1 style="text-align: center; font-size: 1.8rem; margin-bottom: 0.5rem;">Obstetrícia</h1>
<p 0.9rem;="" 2rem;\"="" center;="" font-size:="" margin-bottom:="" style='\"text-align:'>autor: Pedro Pavan, UFFS.</p>
<h1>Calculadora de IG</h1>
<h2>Cálculo pela DUM</h2>
<label for="dum">DUM:</label>
<input id="dum" type="date"/>
<button onclick="calcularPorDUM()">Calcular IG</button>
<div class="resultado" id="resultadoDUM"></div>
<div class="resultado" id="resultadoDPP"></div>
<h2>Cálculo pela USG</h2>
<label for="dataUSG">USG:</label>
<input id="dataUSG" type="date"/>
<label for="semanasUSG">Semanas:</label>
<input id="semanasUSG" min="0" type="number"/>
<label for="diasUSG">Dias:</label>
<input id="diasUSG" max="6" min="0" type="number"/>
<button onclick="calcularPorUSG()">Calcular IG</button>
<div class="resultado" id="resultadoUSG"></div>
<div class="resultado" id="resultadoDPPusg"></div>
<script>
    function calcularPorDUM() {
      const dumInput = document.getElementById('dum').value;
      if (!dumInput) return;

      const dum = new Date(dumInput);
      const hoje = new Date();
      const diffMs = hoje - dum;
      const diffDias = Math.floor(diffMs / (1000 * 60 * 60 * 24));

      const semanas = Math.floor(diffDias / 7);
      const dias = diffDias % 7;

      const dpp = new Date(dum);
      dpp.setDate(dpp.getDate() + 281);

      const dppFormatada = dpp.toLocaleDateString('pt-BR');

      document.getElementById('resultadoDUM').innerText = `IG: ${semanas} semanas e ${dias} dias`;
      document.getElementById('resultadoDPP').innerText = `DPP: ${dppFormatada}`;
    }

    function calcularPorUSG() {
      const dataUSGInput = document.getElementById('dataUSG').value;
      const semanasUSG = parseInt(document.getElementById('semanasUSG').value);
      const diasUSG = parseInt(document.getElementById('diasUSG').value);

      if (!dataUSGInput || isNaN(semanasUSG) || isNaN(diasUSG)) return;

      const dataUSG = new Date(dataUSGInput);
      const hoje = new Date();

      const totalDiasIG = semanasUSG * 7 + diasUSG;
      const diasDesdeUSG = Math.floor((hoje - dataUSG) / (1000 * 60 * 60 * 24));
      const totalDiasAtual = totalDiasIG + diasDesdeUSG;

      const semanas = Math.floor(totalDiasAtual / 7);
      const dias = totalDiasAtual % 7;

      const dataDPP = new Date(hoje);
      const diasFaltando = 280 - totalDiasAtual;
      dataDPP.setDate(dataDPP.getDate() + diasFaltando);
      const dppFormatada = dataDPP.toLocaleDateString('pt-BR');

      document.getElementById('resultadoUSG').innerText = `IG: ${semanas} semanas e ${dias} dias`;
      document.getElementById('resultadoDPPusg').innerText = `DPP: ${dppFormatada}`;
    }
  </script>
<h2>GJ</h2>
<label for="glicemia">GJ (mg/dL):</label>
<input id="glicemia" min="0" type="number"/>
<button onclick="avaliarGlicemia()">Avaliar</button>
<div class="resultado" id="resultadoGlicemia"></div>
<script>
    function avaliarGlicemia() {
      const valor = parseFloat(document.getElementById('glicemia').value);
      const resultado = document.getElementById('resultadoGlicemia');

      if (isNaN(valor)) {
        resultado.innerText = 'Insira um valor válido';
        return;
      }

      if (valor < 92) {
        resultado.innerText = 'Hígida';
      } else if (valor >= 92 && valor <= 125) {
        resultado.innerText = 'DMG';
      } else {
        resultado.innerHTML = '<i>Overt diabetes</i>';
      }
    }
  </script>
<h2>TOTG</h2>
<label for="gjTotg">GJ (mg/dL):</label>
<input id="gjTotg" min="0" type="number"/>
<label for="totg60">60' (mg/dL):</label>
<input id="totg60" min="0" type="number"/>
<label for="totg120">120' (mg/dL):</label>
<input id="totg120" min="0" type="number"/>
<button onclick="avaliarTOTG()">Avaliar TOTG</button>
<div class="resultado" id="resultadoTOTG"></div>
<script>
    function avaliarTOTG() {
      const gj = parseFloat(document.getElementById('gjTotg').value);
      const v60 = parseFloat(document.getElementById('totg60').value);
      const v120 = parseFloat(document.getElementById('totg120').value);
      const resultado = document.getElementById('resultadoTOTG');

      if (isNaN(gj) || isNaN(v60) || isNaN(v120)) {
        resultado.innerText = 'Preencha todos os campos com valores válidos';
        return;
      }

      let resGJ = '';
      if (gj < 95) resGJ = 'Hígida';
      else if (gj >= 95 && gj <= 125) resGJ = 'DMG';
      else resGJ = '<i>Overt diabetes</i>';

      let res60 = '';
      if (v60 < 180) res60 = 'Hígida';
      else res60 = 'DMG';

      let res120 = '';
      if (v120 < 153) res120 = 'Hígida';
      else if (v120 >= 153 && v120 < 200) res120 = 'DMG';
      else res120 = '<i>Overt diabetes</i>';

      resultado.innerHTML = `GJ: ${gj} mg/dL → ${resGJ}<br>60': ${v60} mg/dL → ${res60}<br>120': ${v120} mg/dL → ${res120}`;
    }
  </script>
<h2>HGTs</h2>
<div style="display: flex; gap: 1rem; flex-wrap: wrap;">
<div style="flex: 1;">
<label for="dataInicio">Início:</label>
<input id="dataInicio" type="date"/>
</div>
<div style="flex: 1;">
<label for="dataFim">Fim:</label>
<input id="dataFim" type="date"/>
</div>
</div>
<label for="totalAfericoes">Total de aferições:</label>
<input id="totalAfericoes" min="0" type="number"/>
<label for="totalAlteradas">Total de alteradas:</label>
<input id="totalAlteradas" min="0" type="number"/>
<div style="display: flex; gap: 1rem; flex-wrap: wrap;">
<div style="flex: 1;">
<label for="gjAlt">GJ alteradas:</label>
<input id="gjAlt" min="0" type="number"/>
</div>
<div style="flex: 1;">
<label for="gjMax">GJ máxima (mg/dL):</label>
<input id="gjMax" min="0" type="number"/>
</div>
</div>
<div style="display: flex; gap: 1rem; flex-wrap: wrap;">
<div style="flex: 1;">
<label for="cafeAlt">1h pós-café alteradas:</label>
<input id="cafeAlt" min="0" type="number"/>
</div>
<div style="flex: 1;">
<label for="cafeMax">Máxima (mg/dL):</label>
<input id="cafeMax" min="0" type="number"/>
</div>
</div>
<div style="display: flex; gap: 1rem; flex-wrap: wrap;">
<div style="flex: 1;">
<label for="almocoAlt">1h pós-almoço alteradas:</label>
<input id="almocoAlt" min="0" type="number"/>
</div>
<div style="flex: 1;">
<label for="almocoMax">Máxima (mg/dL):</label>
<input id="almocoMax" min="0" type="number"/>
</div>
</div>
<div style="display: flex; gap: 1rem; flex-wrap: wrap;">
<div style="flex: 1;">
<label for="jantarAlt">1h pós-jantar alteradas:</label>
<input id="jantarAlt" min="0" type="number"/>
</div>
<div style="flex: 1;">
<label for="jantarMax">Máxima (mg/dL):</label>
<input id="jantarMax" min="0" type="number"/>
</div>
</div>
<button onclick="gerarResumoManual()">Gerar Resumo HGTs</button>
<div class="resultado" id="resumoManual" style="margin-top: 1.5rem;"></div>
<script>
  function gerarResumoManual() {
    const total = parseInt(document.getElementById('totalAfericoes').value);
    const alteradas = parseInt(document.getElementById('totalAlteradas').value);
    const resumoDiv = document.getElementById('resumoManual');
    const dataInicio = document.getElementById('dataInicio').value;
    const dataFim = document.getElementById('dataFim').value;

    if (isNaN(total) || isNaN(alteradas) || total === 0 || !dataInicio || !dataFim) {
      resumoDiv.innerText = '';
      return;
    }

    const perc = ((alteradas / total) * 100).toFixed(1);

    const gjAlt = document.getElementById('gjAlt').value || 0;
    const gjMax = document.getElementById('gjMax').value || '-';

    const cafeAlt = document.getElementById('cafeAlt').value || 0;
    const cafeMax = document.getElementById('cafeMax').value || '-';

    const almocoAlt = document.getElementById('almocoAlt').value || 0;
    const almocoMax = document.getElementById('almocoMax').value || '-';

    const jantarAlt = document.getElementById('jantarAlt').value || 0;
    const jantarMax = document.getElementById('jantarMax').value || '-';

    resumoDiv.innerHTML = `
      <strong>#Controle de Glicemia</strong> (${formatarDataBR(dataInicio)} a ${formatarDataBR(dataFim)})<br>
      ${total} aferições, ${alteradas} alteradas (${perc}%)<br><br>
      GJ (<95): ${gjAlt} alteradas — máxima ${gjMax} mg/dL<br>
      1h pós-café (<140): ${cafeAlt} alteradas — máxima ${cafeMax} mg/dL<br>
      1h pós-almoço (<140): ${almocoAlt} alteradas — máxima ${almocoMax} mg/dL<br>
      1h pós-jantar (<140): ${jantarAlt} alteradas — máxima ${jantarMax} mg/dL
    `;
  }
</script>
<h2>MRPA</h2>
<div style="display: flex; gap: 1rem; flex-wrap: wrap;">
<div style="flex: 1;">
<label for="dataInicioMRPA">Início:</label>
<input id="dataInicioMRPA" type="date"/>
</div>
<div style="flex: 1;">
<label for="dataFimMRPA">Fim:</label>
<input id="dataFimMRPA" type="date"/>
</div>
</div>
<div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1rem;">
<div style="flex: 1;">
<label for="afericoesMRPA">Aferições:</label>
<input id="afericoesMRPA" min="0" type="number"/>
</div>
<div style="flex: 1;">
<label for="alteradasMRPA">Alteradas:</label>
<input id="alteradasMRPA" min="0" type="number"/>
</div>
</div>
<div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1rem;">
<div style="flex: 1;">
<label for="maxPAS">Máx. PAS:</label>
<input id="maxPAS" min="0" type="number"/>
</div>
<div style="flex: 1;">
<label for="maxPAD">Máx. PAD:</label>
<input id="maxPAD" min="0" type="number"/>
</div>
</div>
<button onclick="gerarResumoMRPA()" style="margin-top: 1rem;">Gerar Resumo MRPA</button>
<div class="resultado" id="resumoMRPA" style="margin-top: 1.5rem;"></div>
<script>
  function gerarResumoMRPA() {
    const inicio = document.getElementById('dataInicioMRPA').value;
    const fim = document.getElementById('dataFimMRPA').value;
    const afericoes = parseInt(document.getElementById('afericoesMRPA').value);
    const alteradas = parseInt(document.getElementById('alteradasMRPA').value);
    const pas = document.getElementById('maxPAS').value || '-';
    const pad = document.getElementById('maxPAD').value || '-';
    const resumoDiv = document.getElementById('resumoMRPA');

    if (!inicio || !fim || isNaN(afericoes) || isNaN(alteradas) || afericoes === 0) {
      resumoDiv.innerText = '';
      return;
    }

    const perc = ((alteradas / afericoes) * 100).toFixed(1);
    resumoDiv.innerHTML = `
      <strong>#MRPA</strong> (${formatarDataBR(inicio)} - ${formatarDataBR(fim)}): 
      ${afericoes} aferições, com ${alteradas} alteradas (${perc}%)<br>
      Máxima PAS: ${pas} mmHg<br>
      Máxima PAD: ${pad} mmHg
    `;
  }
</script>







<script>
  function formatarDataBR(dataStr) {
    if (!dataStr) return '-';
    const [ano, mes, dia] = dataStr.split('-');
    return `${dia}/${mes}/${ano}`;
  }
</script>

</body>
</html>
